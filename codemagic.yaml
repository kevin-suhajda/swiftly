workflows:
    ios-swiftly:
      name: ios_swiftly
      environment:
        vars:
          XCODE_WORKSPACE: "swiftly.xcworkspace"
          XCODE_SCHEME: "swiftly"
          BUNDLE_ID: "io.codemagic.swiftly"
          APP_STORE_CONNECT_ISSUER_ID: LY64D5F898
          APP_STORE_CONNECT_KEY_IDENTIFIER: 4b453230-51cb-40b6-bfbb-60e71ddaa13a
          APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYySU1jcU9yZHUyQnhjLXg0ZGJfdkI4emN1RTFmUUtrclhEUkU1YzktdnZpQTVveGV0YmVDZktPa2JtTk0tSHMxejlNb3VoaXQ4WWRma2JobGJiaV8xVkUxdE92aW9PMWdZR3owQzNxcjZ3SDZ3OW9CQm92MnpqMTRfMFRaSVBrVjgxZWZYZlNETURpUUNZRHFjN2hDRnZQRjlZYjNSNFM4RHV1SF9yM1ppUlZQQkRZVUphLWxWYXlmdE10bXZXSFNzQm01UjN1WUZnMzBpTURsSl9LS0ZEMkh0NGF3c29RQ1ljdUVlYUpseC1yWXlwZ00xa0tfX09Cc0tiaC1sLVpBWXJ1bTZzTVJEVU96US1fWlotMllwaUp2aVBoR2lKYXUtT2R1OGRfZy1YOUpOamxVQlRiby1hcjEyRVJGNzM0cjJhZTVRaUZOclpGMHMtV3hTYTlYUGVPZnNIa3JuMG5sa3p6SUVUZHRJWjFVQl9yNVoySVctR0ZEd01kM1BDQUNtZjI4TlRIY0ViN3JrNmlGWENYQjgwa1Z2SGlCcUxYUkpQWFVOTHZ4T3o1d1ZxTT0=)
          CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsbmo3a2RsMkFQNU5iMlVKVE5tNV9yLUJWNDdLNGpHblpQN01WNkpkWHB2cXZGUGNtclJoV0ZmMHIwSFhnZG9nMC1kT1BPdTRPUnMzZG5XX19ScXpZZExCM19qNWxsRGlaRnhSM1ZZRW5uZU9JZkJyajc4QVZ4UlFFYWF2WkVVaEh5XzBNakNPdnVQN2Rkd1Jybk9SRm52R0IyalVHbHlyUXZRX00xZ0dYOEstQjNIbW13eldDQ1Y5MzV2UFg4V3lWOVJadW1QRk0wSjV1RUFXT1ZQXzlaYTQtUno4S3ctNi1hRkJIRDhGMW9LdEN5UkdIZ25FckxNTTRCS3JSODlJbFQtN1NKTTQzRXdkVkNaLUJjbU9jZWVYQ3V5aHl4RlNGdUQyQ2RWYUs4d3NpUEVVVnM2cEN0U1BwQ1N1VjJjMkFWNlBpb1N2S05DcTlPVVFHNE9EUUNBeXBGTEFISmJpRGdMRHlLMXJyTFFJdDNOa0psUlVQYUxNSlU3VC1PSXdQcHJvYlBqeXk2a1RaeExuUzU5UHBzRTZqSTZsMFZIaHoyY01vMXItcFREVDZtMzh0YzZvcF96VXUyR1BSS2N6YnZFQXI4SFFQclBoSndVRVRDSG15U3ZNempNWWtES05FU3VQNEFscmpmTmpvN2FJdnNINnhhekRSRTcyQllobDlOdnZpM2xmUUhhMEkzdHVkV1hTWXNuWndnWTc2VC1icGRFOEl1TE9OZzVoVE9ZNklOU3RkeEpwNzBkSzd6eHlOVVo3aWEwSlhNOE9WVHk2UFI0ejBfRV9IRmtXNkVLWVZXZW0wcnRTYmFGQVNoOVdFOEhfNHJlMkZhN0JVcEdfYUdUSDN5WWpVWUR0bndFUzMxLVBobmdBQl8xdlFLbk9malg2a09ETkl6TWlmVkY4eHhFTjhGdS0yU2xyOHBjZGhHQkpUNE9icDVRcHZTVUVJRkVmcl9UV1cxM0hQX3A4ZUU4SzAtWVBkaVZnQkRFSHRldm45Q0RMbFpUX0hsenA5ZTVUdG82U1BqN2lEcTh3ekFlMFdBem5ocmg1S2dia1cwU0ZfX2Z6Q3BPWFdlbGZpVEpZc0dwaGFpMHhBd0JaLXBNMnUxZXpyOWEwdENzdTFkY3ZqUUJqck8zVXczeF9hMTdvdlE4U0lSR2pTLUc2clJ1UkV1TF8yazFEX05qMm0xUFlhdWpDb3ZEN01NWnp6QnFrcTNsMFhJSkZFYmZ2TmpZRFQtSGlTRmNJZTU4MFA2WV91RENVNjk4bHRpQVBES3pDcGpnd3ZsWVE1dGdKQ0FTVXJudDlwbXJaNFFpSDB4RFdfd2ZsLXRDOW1QdlVWUWNXdEEzc1BoM25SRjV1TXZMMEtNRGdnWHpJd09QM2N1Y0dHXzdfbG85aWtTQWlkNjVHaktrUjVwTWFtZVVsbkVSYUdoM1UxUVdpNnRRdDBBNEp1bWVGUEN0TS1fcGJwNzk0Mm04b1J5UUkwbmFhUmlhRjA0MTVsdnprb3psWnlvVk1jendmRVBJNXBNME5OUW51TlFsb3VtVHUxbDBmSFBGY1hSTFhtd1pvd3c4NFBOdk5zMzIzTEdRQVhzNUhUVVJuTHZXek5sRFI5STl3QlpGVk02WGZOajNHZ2xlTFB6SUk2VzF6TTlXVHFlUTRQZm9XeVJtQVRZT2NtWFJMcEswaUlUamhhTzYwSTdQYW5BWDAzcDB3ZXZicUhZSHR2S0wzWDhXVUVWaTZZX2xCaV9hMnNQbEZSRm5YLTRrZm5nSmFxQjkyc0dHUHBoNGNNaEdTeDRHdHBzV0dDUzB5UGRoRzdmbE5IdTVBc212b3RrVUdtU1VtcU9lRmdiNnE0WnJyT0dRZ1JSN0hBeUFnQTJHeUxxQ2gyeXBpY25RaW9pTkdoNTVES1h1UV9ZSktqNWNSaW45cVA5N19SYmlsZUNPN0U2VV84ZUpsamo1WkRmTGRZcUxnWTFvOG14bWpaUm80LTVTb3VaX1BVd1pVcVhxeE0wTF9aQnZIUjI3RmRCSWJ0NzlQejdybGlMRjg5Tm9kRWhjZjg2cDhBYlZvdmhKS0hlejF0VUFER1NDazhpODd1SFhlM0JRNWRERE51Wl9hSGlVQmtROF9SWlhmR0U5anUxVmZRVkgwZDk5ZVU5QUlabFk0SnB5bDNmYXRPMVA2VG0tSzhucE8zclNrRGFGVXBFclg0cUhLN19qR2hxT2NEcDFJMExEN0o3NEdrVl80c1QxVnhla3dlaWk1T3ZtZ210UV95cE5GOF90RjdndmtTZG54UkRERlo0UEJZNEVja1kxVEw5LWw2dC1RV1JpSk85bjdLelRqMUZzUTd5STQ4cGlfNmlTQ1JDc1hWSnV4OURRc0gtUkhvajhPRnd0ZHhCXzBaLWpyR1NnbGlkYngyWk5FRWdYQ3JuaFpBY0x5djlod3pUVy1VT1VrWF9KdjdORWR0THhlUzFwLWNtcG8xZmRfaVVaRDEyZkxGUmpCYXlmLUE4QWtaclpnTVBHWnF5cVplaXczUGdObWotVUhwWXBDM3pIM291VU1mYjUxZjVKVmlfVV9kVWJRc0NhYWphQWx0UTNvY2JOa0l5S2l5VTkycUJ5c3FjM0xJX3l6Q1ZMeFZkU0doY3hqYmhTYURNNmhiSHZrMnJXS3lLaGcwZG9vcFhsOS1yZUhKaXJTNEtnYWNrVmIzZ3F3N3A5TTRFMU1JNnJXcUItSUplQUNZNHVNclNxMnJtcU9jR1NHVHJWaHpWOXdpX3NYeUhKV0dqY3V4UllSaUpabENoT3RTM0FFUGZNRk1YbnA1OTMxbHpSdlo3RzBlUDVmaWQ0TjZ3WWVpUHJvMWVlZktVRG1Fc1FLTVZtRDh1Zi0tTEx0aE1tS1pJMkdOOVk2RjlEdHlPOURoT1JRTmJJLUxKUGRXUlZIRXFoNDAxeTRQX3lCXzRabXFXcnVkdjFzT0RmaVhVbVJscGhRbkJrcUVIeXY2RGliTkd1MWxmQlZ2TmFJYk11clBFWXIyVDhsOVZ2bjMzcUpjSk1YN2VGQzZ6RFc1TXBMVVVibXFaSjhfbXFs)
        xcode: latest
        cocoapods: default
      triggering:
        events:
          - push
          - tag
          - pull_request
        branch_patterns:
          - pattern: 'develop'
            include: true
            source: true
      scripts:
        - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
          script: |
            keychain initialize
        - name: Fetch signing files
          script: |
            app-store-connect fetch-signing-files $BUNDLE_ID --type IOS_APP_STORE --create
        - name: Use system default keychain
          script: |
            keychain add-certificates
        - name: Set up code signing settings on Xcode project
          script: |
            xcode-project use-profiles
        - name: Increment build number
          script: |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR
            agvtool new-version -all $(($BUILD_NUMBER + 80))
        - name: Build ipa for distribution
          script: |
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
      artifacts:
        - build/ios/ipa/*.ipa
        - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
      publishing:
        app_store_connect:                 
          apple_id: suhajda.kevin.ferenc@gmail.com   
          password: Encrypted(Z0FBQUFBQmZtQmhXUngzTVEzekxTeW1CMFg2bV9vdXR1Q3hyZUliNEs4QjRibDZucjJITVI0bkV6WXZCMk5VcmxhcExNNFgzdjZuLUpmNldDZktmd1RuamJhUVkxUGpXcEZwVVh2VkFLUktvNE1hSjdkVUJ2N3M9)
        email:
            recipients:
            - kevin@nevercode.io

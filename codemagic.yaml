workflows:
    ios-swiftly:
      name: ios_swiftly
      environment:
        vars:
          XCODE_WORKSPACE: "swiftly.xcworkspace"
          XCODE_SCHEME: "swiftly"
          BUNDLE_ID: "io.codemagic.swiftly"
          # APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmYySWNCQ29xaFI4c2psY1FncDdsdnJEdS1lTUd4T2RBeG14SW96Z3FTWng2cXA4UGFxSFBxb2Q0WkpmWnBXbW9walZOa1g5UnF1UWxTcHlEdGVHVGs2WTdBeXc9PQ==)
          # APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmYySWNVSEtlMkk1eTJDQ29BVW0wUXJOSFFVUkxiUmFmNDVjcU9oaFFGUEJjdC1TSEZpeDBRaFQza1pXcjFXQW5Memk2LTEwUkJwX3BqblI2T1RrZC1CS1RBVjBqNU1XQnJfa2JfOGo4NHNZdlNyNHJraVRXX2IzODBYemphcG5nbEFRbmE=)
          # APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYySVJyMHU5cksxNmFDNGlITFAwRnNOUF9haWlNWEEwdzAwT1hGOExqMXJlbjZ0WXR0eXNJQWdrUGtlWXhEVEprOWo2QzNnX2VTenhNSk1vQkpDc19YLUNmLVROcUY3NFdqbE1Fa0NKWVlKT0xNbTNGMTdrTlVvQk02VUdCNVZYak9QVUJ0UWlvNmEtbEU0NW9VYXI1X3pwYllYVzM0OThSRWhzY3ltYUlhYzdVUnVFMUpwd2V2VXo1bVhrcVZsMW9BTjJGQ3pJejZDRHFGNlRDSUV2ampmZ0NuYXFTSlk2VUkyNHJRUk9nMzNFNEpQZmg1TVkzS0pLN1NhdXRlQ2NxLWl4S2FWOXBkQ2pqREthOF8wN0FmbzFjOUo2RkZCZl92MHcwV0hxOVYyanNQRjM0SXFUSEJVUS1ZNzlscERMRThaSDBPVmh5WnNSdnkyQnd1NjZfcDlRZm1Gd0NVZTBoMHk4amFtNVJZT0FiNUp2TlVEb2JfUGdYd2o5TzRGWkw3cE9lTFY0YmdVekpjeWFhcVF0VXRZUFNqUkxjRW5hVzkwelBteTdlWVM1MWltcz0=)
          # CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYySVV1NmFJNjJaYUgta0dUNDk4R1RlSTNSaVRMMEtGVGVYZWd6andtcTVLdVFEXzZTdlJ2X0l1YWhzNXZ2d2ttbHR4V3RSbjZrWlhvRlZpOFpGOWFoc09jX3lYT2NqNEluaHl2bzducjQwWndBQ045M291Zm5QWjB4MnQ1anhPcmNibFpET3NvaERyaVphRkY5OUpxZ0V4eXBRM0FDXzVvZVU3VUxhWnAwUFRfMklQT1dvSmh6eENLTUdObXRYdGtjbnlUTWlTNU1NZFdiVHZRRFY3VEJGem5JVk9rNVluQUhsUE5FVmJrZDZFODdqN2hhc1dCekdOQTdxQmRPSGhETTl6SHdZUzBnbE1FVnI1ZjdvNGNGcTFfVEpvc3ZXdTg1OG9aWVJ4TS1LdnNBM0UxQUZJQ01KZmFqbHI4Q2VNc3ZGNk1idElHVzN0Vi1WX1JHcktRLVNmVUUzVnZsYTZ5Rlc5azJHbXdPbDU4d1hjYjdaTWpSeVdieHRrbnlvenJlWVo2a04xUTlseGlKN1pQR1hNYkpaaGpBbDFoTlAtXzhSN0I3X0FGZkRuaTJpb0lBREdWY3pheWtXdllmSWVLV2x6bTB1c3Nxc1RxOEptckhQVmJERVpvVWVSTEhJRVlvellyTldBcUJMckY4WnlfVFlrQXRQR1hWX185TDQtWW4zanRyNEFZR3h6M1ROR2lDSW00YlhXaHJvdnZBSldpQVhxdFo0TmxzNk5YckNaaDZZU1A2R2g3S19tQUp6QWo1bnl1eEdMZUNBX2QxandlaEYzb0Z0Q3kyMWFkSDZqSGN1VndIdjk3YWRad2QwV0Nabm1seWtRODRFSWVPOHRPdlJ1MV9UT1QxcTg0UDRjZ0VNaFEtSS1Kd2s5ZGRYTVlHYXZNVjkzZC1VNnZXLXU5NWtGZjFpb0FNRzZvMjZmMUd4M3NGdFkyLVgwX2REdTQ5VDZYMHAwMnNZeWc5VEtONjVnQWtZZE4wZGZsazRaeU9IQXNpeFNJaGpOUmNIOUt0eGdpZU5rN2VEZDNzX2hob2JZNTh5NFVZNWI3WjhHOWdyQ2gyLXA1UkxzR1E1VVZ4eF9xdFJMZU5IU090SzRFSkVSZTZYOFROdFoyd2NXVVpTWHVwSnN0MElSN0ZReEY4MG5XdV9uWDJqeUVnT3VvN1BYV1JsaFp4alg0NmFMVGk4VUxZdGZPbERlQ3FXOUdHQmpOeExLY0RMQkg5ZEFrV3QwN1Fqa1d1ZmtoTVM3U3ZzSWp1MHJRSHlhanJRWGM3SVVoMy1GY0UtTlVYaGMzRmt2eXlYZWpUVlZxekFoWUtoM1BWY2o2eTdpd2I5bEdqM0pReWJmaDlqLXhCRUhmZHJxQ3VaNGZtZ3JVSFB1dXZhcmJGU0poYTNwTjc0clVpbjhlWWZnSG1Qbjd4eTZEUkV6YjU3YzFEQTd5OUhQZVRscVRlQlc3QzNEMldDR1BqejlxSXdpdWo2WlJXV3hYSUE4Z0FEaW5vWjYzQS1peGh3RDR2ZVhKd2VxTVhTZnJpUm1JNXpCc3Qwb3hSdWxMb0E5cjB5MHhBTVVUZ0wxNTQyUkhnWENiLW9wNkZ1TElnVnJqTVRfN3lBSUY1UTh0WGR1MUxQRHhoTGNHdWdYeHZCZU9Xb2lVcXM3dzhhOFRwdzNyTVdBaE5iczlCUHU4and4T2JFdjk0Y1NXLWFvcEhjRGljdm9hRUhRTElUY0MwQjU0eXJFTTMyZm00VkZLdWZpdzJmYlE0UkhtTWtXdDlPUDJhYXRTWXV5Y1I3c3RNRF9QcDMtVGQ3am16XzZXajlIbVhKTHdCTzhjcUQ5TlpDRk5nVjFjMTR5RFV3Y1BHN0JnWUxrejNib2h4TzctaVl1aGtwRjIzX0tOWFJUWHQybTNQSkUzMUxyNWJmTlNLMTB1VWVSNm1xem96WkdvamRFT3RSck9LN2F2czdXbzhLaF90RFRlSG55Z2JLV3VzY3gyWGkta1Z6NHRoMWtoM1p5dkVjS2otc3RUNjk4OFB6OGVzRjJMRXhuZmFxRXBRRjRKUHc2RWVCNE1iaklMd21SQWdORVl2eUNpY2dhaWdkalVySXpjYm52ZVRFS1NROHpCZ3JhSjFDclZSYzRWeW5rUHcxMU8tdnI5eU5GR1BUdzJVdkswaF83VTg4R0FGREx4eVRWRllrTlJneW1NTkljRU1tVXdlbDNSdjFJVG5FemxuVlpQTGV2T1A3TUVYbmN1OXhnWnpvZlJqU0JTZWRDMXFNUklMSDBnVmo1MWNVUmlOaXU4MGgxVEFnaEhlcHZuNXloYUFHWXA4LXYxZGtlWXFieDVyQnhjeHZ4RjJ2ZllZTXJGQnBDSzZTWkh4UWd4azdKR0ptd2lsSTVqQjIzQ3BpMW1IbW96VE5DMldnUWJ4eEJDQW1LeG1JQzNkWG9ydW9sRndfVGtUTDdZcnNkb01MZHZWZ184MVNpX0VVeF9fWFBXaUJTaXk2UDItRkJyVTFpcTlINWhPMlhmSTFod0s5YjJUS1RMMFNqYjVjcFMtSzdEMndBMzdySjZUWktlc1R3b0pZbWxLRGE4M3V4bjJ5TG9OY3ZaeVRneTRTYXBHUE9HdTlrNG5CWXQyNV9XcFAyMVNqYVEzNkZ2bUY1d1lxcTdmNThReGRvdGUyclk3NkZzSmpOM2ZBemVvdmhPMzVQS1VOVmk2NHVpR0dDTkExYlprYkxJSTY1NWFMTHlyeEJwdm1jWHlWV2V6LVE5VGxUd3RKWlNpbS1KVll1c3FGTENjZ2JPTlFCdjgyanNSWDJRcnZLQVNaeEJJVUlvbVFuUVF3VU0ydXg4YnliblFTdGxzT2ZlSEJHd2Jqd3c5dUpfb0tBalVXdDZ3eExqVzdJckk2VUJXQWVIMnotb2RCRmNSbGQ4bVZTZ0Q4d3VzQ0dDc1YyS28zdFVnTDBYWk5JWWVpTzJhbnY2SU9pS2U3UEJ2SmZ2Qjd3LUpTbVVoTFZEOVVwR0haRkstTVZ2UEdZMTUxQzFEQ2ZKUUNoTEt1c0xvQlVqeTQxbFlUaU9RekRHZkRqc2V2OTRqQXZZ)
          APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmZxN2pDekhXenJ1Qmh1RUlwZERfS1VFak9nWk5NdXdNbWtTMHdPcWxxRXJ2c1dJb3RYMWVPS0JDVTlWdmo5ZVpnbTBhNm5MT1VZZFkzQmVYZFVGOFMyakJFNGZrdzJWWERmdklBakhMM3gtb1dMZzVUTzRCd3RaWEh2cjJuV0tzOFlTb2E=)
          APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmZxN2pUeXBtUmhDN1hvZ25XRjZ1WnptdERyYnpObklVWVJxREdDei1kVEZPOGxlMlhzajFMOC0yNFJCUkR1NF8yNHhFTUVQMi1HdXBfSl8wZ1BuTFlZZ2dPOUE9PQ==)
          APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZxN2RMYUY4RGM1b0djR1hEYVlVbVMwSHFnckpTNmpUZnRUbnR5RW0tckxCYUhlOUxvaWl2d21tel9SamJaNWdNMlFCRndiS09hM0R6Z1doeWxfak9yMUpCdnB1ZG9ZTV9ScEttV3piZVdFZ3NiYVBjSlBzZkI1ZW50RnZyQlNxc191U0JnSlZxalY1dmFRekhTWFF3SWFvaC1oNzNRUWlxNTRPdVpzYUtCUGZmZmQ3Rkd3UjVEdTlpalBjazNDTTlmcTlzLWFBQkN5cHhya2FaRTlrZVdXMWZUc0lRZTFvcjJLSm9qZmJvRjZuM1ljbXA5R1JGeTRWaXk4blFiQllNMmxuOHpPMkUtUkdvNmthMC1nWTRBMTd2ZTRFYlhxUy12djZ2YVRiaXpBOEl0X045bFNjTVVfeG1fRGszR3o5TUNVV0lUSklkTmdxMlRHUmExNE9lQTBSZzBrdFlCTlRXaFRRQzdrcUJTT3hyYTJpN0pwdmZTcS1PZEFfUUtyaUs4OWM3R2NranNkaXhZY1ZOVWZjeUJwOFlyVDY1QnJYQ250SWQ4LXVVTzJWZmJGbz0=)
          CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZxN2RMb3BPMDhoRXFvVllFamFLdWF6TVhSVnJtbDVEX0hzNVg5NGJZSEdJcnQ4aUtuX2RSSXQ3Qm1zN0Q1Zk9oeVBhTmttamx5Y0JkRU5VQVZZRmZtSjJyMG5mZFNnNm9yRTRMTV9WcTZYMWxtUUtGb0pZMm9tV3VPbnA1X3VhOHMzUFFsWk5OVUpZQzNCb21GU0IxaFYyMmRSOUkzV1U4b1Vrdlg5MVl2bVNhYXctdXhxVDU1YWg1eVk5YjlTQ3NOYmI0MnRWZ0xGVERwdkZPdV9LZHY0NDFGX1Via0VFaDhXd1dzTFQ1WmJuX25kMGJuUlRkSW1naFdrRHlHWEhJNzE2ZGRnOFBTNDlLV2pwOEZRS29hcjFhRVM3RUJheEFsR3Bwc2J1c1QxZEZRUURvaWVDUVJ0TG5Ga0l2MGtTakx0NGtWQmNjY1puRVNPZGZSWHhPeFBCVDc4aGg1TGw3c0h4S1ZvYnpxOXpZbHV3M0Q2TGVDd25tQTBHZkhBYXpSN0pzVVJmbnlpRDlJUFN2dGdnZkpLV3pEQWZ4TUJxWDgtRTlJQXBzaEVESnhkTTJUUC1MS0phb2hDaVRseWI0bjJvVFl4V25ueGZSZDBVblBfbmN4cVVEelM1RmY5Tk5HYzZCNUw2SUpWMnFlTC04WmR6QW9ldmRVdDJVbWNuZE5fYU1aZE9kRFQybXFsWnhDSEFMd2VCUXAwTFhKazUtRGtneXBhSFhCaVFVQnl3VjN3alo3N19IdEJ1MTFnMXoyVGVWNE5DNHAzZkV2RUk5bUUtaHdiZTRqeUoxSjdaN3V1bGtuZmxPZ3NKOG04WlZjR2lRTDRlcEkzczA4MWoyS2d4V3RPQUR2MTJpamkwZUE4dURxc2dXMzRtaTZ1bWhiWnNTV2RUaDFhRThfZHNBMERENHJTeHBkdTc2cm9PT1FBWVhDaFEyREQ1OTBJUUVYdnZVTzZWclFNc1o3aUs5emQteEgzSkUwcU43YVYtRXc0ZkF1aDVMWktGc0lEbHJGREthTnhOQ0FiMWlLZXNBakxid0k3R0k1SHNQb2FNend4YmVEbGFrZzZodGh1Z2FHWk9SeU15LXZuMVRYeEtVamRtTlR2RGRHVm1SVFlvY1dZTHN0dlY0elJrUnllTnBqRlY3UWdrTi1XMDZnRWQwUHgxR3JfTElvVnZ1VE5CVmRPQ3A2SDhxSXVrQ0VDQ0ZvdWhYUEdNLXY1WFpDUFE2N0treWhmNXl4SG4tSGpjTzVLd1BZdzBLZVlFVTQ5UHBpYmFMb1M5Ukl1dkFtVk1MNkZETFVvYmQ0T29nN1Bwb01lR2JRT3dmNVgzM2NzUWJFU3ptXzh1WElsSjVRa3Vtd3RwQnU4RzI4WnI2QzltVzNyYzBxTm5UT3A0LWhnOG1kNTRJRVBkanNlY3B5QUx4X0FSYnlLMndsTXRXZXZielVPVUtIb1lMZXFQS3NEVFBBemlXaUFPYkpmYUJ1Y2otNkNJelpYVG5XcEJ4MVItYy1FcDdnT1RtSVdDYXRZc3hvcnBOVGw0RGNPY1ptUHBsOHhkUmFibUNuUXBtTXlaOFgyT1E2NmdIelhJWENxZVVzdXNuX3F1Tlh1MXg2aVJFR3pCVTdEc0wwc1dUR0ljTHN6ZHNuUFpHZUp0alpmNGkwaW1sSW1aVVVKVnp0YUJOODFOeS1IbG5USGVyR0NUUUY2cXFnRGV2eUpxMEdrUUt1dkNKNVFSTTRSOUJoMmd5RTAwQjlVSXI1ekt0SU50SDFjQmpodXZGNlVCNHB0QW5Sa0NNOFkzYkYxRW1tNHZyZzQ4Zmt3VGNUUEl5eHJNdU96UlF5QW00Y0ItLVFzeS1rSF9wSmFmeF9XUmlrT2dQclF4dWlKT1lJZDZfN0NSenRzaExVMmYyYVZKWkZBSEdPUUV3ZlZKZDJieFRTNGR3TldPZ2xrdTlwN3VURlgwRVZZcmhWaXNfc1ZxWXpuTUJFODdaNTB3WmRfNWtPenFwbnpoT1Y5Ujc5YlhEZFZxYXJWTXNxdHlxX2R0ME94ZmdfUzZtMk9oTjBLZWNXUEItMXJlZHNwYzJwQkJ3MXhyWk8zMGt6MXhYOHlGMGd2TjFqaC15N3pRWFZvUFFPVnhGV21STzBXcTVLTUxDM3NJM1pQUk4wc2R4d3hsSC0tckxESzdmeWlvaXk0ZGJqX0U3NW10eGJJcDI3U2VDaW10QWFwcFZ2RmFUMk5KVExLc3NkcGtFUkh3UTd3N2RhdWJvMDZlbDBwc0QwZGdUQTJKSnJEMTBCc0NVblI3Qm5zSjc2VUEtUExEQk92U0U5MF9JWHVxQjJsTURKZVFsVmFGNTRLbmptdmRkLW5BTGVfNFh4S19iVGNrOXJWdHVVNlFycXVYcnRFN2otN2ZyellSR29mVHpWbEUzc0Z3bUQydmQtV3lGUy1OaTV2cldtSXlXTklaTDdHaHFQZVU1ZlRFaWlaS2RYM0dYNmdtNElWenNVQlNQUkhKSGR1WHVHMGpDQWdhaHZkUWVlWklkeHdfS2NISXptRVlwUDRsTEZlM190UkhJTVhtZGVDUDM5d3VZMzh4VXRzTlpTVmh4NVM4empFTllnb0M3MWloam1YWEFwTmRkMnVCMzhYRUJTcDFka2lQSi1uY01vWUdQN01vWUxRQktoSzllN1h6Tk1FdVBGVXB1X3daTGRjMHBYd2tfWDBHUXoyNm1MYUt4cHM5TUtsY0xRWGVFUldTa2U1d0ZrY2ZsdkNrMU5LV0NVUDBYcVFLRWd6SGtBbURndE4tSkU3T3dRTExyZXJVUUVUUGdRX3ROR1hfOU00UUI2Zk5aVWMyM29Ga1VqN3VWNFhwTFZvSDZ6Q0twckY4d2NxbllXeThVcDNhVXEzZVdMSkxjUF9IRzdpbWdvWFBueTFQclJUamFyTjZhLXFuVG1RWExjdFpFalctbFRLV2kwUnppeDAyOWQ5a1JNREhiNm5XdjJXaXVrLXZpblhuRTZzUmRaTDkzaEhiUi1peENrcjFxRVd5eWNiYU1KYU5ncXF2R3JYS1pSNlZsTzF3RHJwRmZmV3lm)    
        xcode: latest
        cocoapods: default
      triggering:
        events:
          - push
          - tag
          - pull_request
        branch_patterns:
          - pattern: 'develop'
            include: true
            source: true
      scripts:
        - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
          script: |
            keychain initialize
        - name: Fetch signing files
          script: |
            app-store-connect fetch-signing-files "io.codemagic.swiftly" --type IOS_APP_STORE --create
        - name: Use system default keychain
          script: |
            keychain add-certificates
        - name: Set up code signing settings on Xcode project
          script: |
            xcode-project use-profiles
        - name: Increment build number
          script: |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR
            agvtool new-version -all $(($BUILD_NUMBER + 80))
        - name: Build ipa for distribution
          script: |
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
      artifacts:
        - build/ios/ipa/*.ipa
        - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
      publishing:
        app_store_connect:                 
          apple_id: suhajda.kevin.ferenc@gmail.com   
          password: Encrypted(Z0FBQUFBQmZtQmhXUngzTVEzekxTeW1CMFg2bV9vdXR1Q3hyZUliNEs4QjRibDZucjJITVI0bkV6WXZCMk5VcmxhcExNNFgzdjZuLUpmNldDZktmd1RuamJhUVkxUGpXcEZwVVh2VkFLUktvNE1hSjdkVUJ2N3M9)
        email:
            recipients:
            - kevin@nevercode.io

workflows:
    ios-swiftly:
      name: ios_swiftly
      environment:
        vars:
          XCODE_WORKSPACE: "swiftly.xcworkspace"
          XCODE_SCHEME: "swiftly"
          BUNDLE_ID: "io.codemagic.swiftly"
          APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmZsWm9wdTlybWlLMlhSd1VXNVBHbHRWamM5ZE9abzQ1cnZJbzRRbnRNdkNHTGdOLWhoQ25rbkFkcU5WQkZFRzhPNG1DdFZHY3ZSUm1mWGVmTEljMUZURnV5WXBxaG5iY1VodUduWlRNTHVuclQ1ck5CVDNmd01EY2R6ZU1GM2lUVk5HSks=)
          APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmZsWnBZMnE0Q05CNkE0NktKa2pGd2hHWVZHLTdldjlDMUJ1TlRMWHR6NEUweDBmQmNGcDlWRlJRQWxVaGVoUWlqRDVoeE4tcVRWSnVFM24yTkdaYlJZSFlZNUE9PQ==)
          APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsWnFDbEpyWl9TbDF2U1haY1ZOMTNkZ3VwZ3FWRzVUR01Wa2NVQlFFTV83LVVjaUtucnp2VERSZGVnczlUSEtfZkVDYTRpcHhqUUdhazRyMUFIYm80WXBGZEhiVm5pdnFBYktyMEl2Z2pETzZlRU5SV2xzaHBheXZkUlR3amhMNzF5Sl8wWGxfa1RCZmZSeERSVGd5V1ZPZUNRUjVUeVBSdW1CcGxfWkZEOHAyUVdsVzVqZW4xYl9HTEV0b1pSbXVRWjBYcERvTnpYSktWQThXTHZhVEhmVUdsakRVTjEtLTNvSUU1azVCeXFtbFJfVkJISGo3c3Fzc3RrajlsR1JsR1VSTTVtZjNmR0U5YVl0bVhYY3lTQmNmNnlYRFAyS1JaYmpkandNbG1qLXI3OEQ3Ql9MRzNDd1dpbUh2RDYwcXljRU9GaENZUl9oSHFWM1NDbUhxQ29ndGk2SFFuRDJkVTh3RGNfY0xyX19hSmhHbVhKTmlUcE5Ca3ZVTFNpWHRFU3V6eXdNLVkzOTd6RTB5b3VQanJWVjJnZ3ZFazZKbnBYQjZJRDhOU1lQVDRRVT0=)
          CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsWnJqcjh5ZmwzdjJGOEc4blE0VWxieXYzNmlIUmRPMmJvckNTMG90YVJ3clo1VGloRE8ySnpqX3lSeXEwSmV1YndSQ194ejZuUTg4bVFHUW9MZE9ocVJuMXI0b0o5RXlIQ1JJYUUwZUF6Z2dqMG0ySENnaVB4TllEaGxmbmVpTFZibEZ5QkE4ZUh0cHpxLUk3TDNmWlVGT3dDdFVwT1Y1WEVTaFB2OEFQZ2dLRjFzejB4X0txV1BCVHdIODNCaktPWUJfSV84UHo5UnlTUUo3RWsxWjQ0b20yTkI5ZGlNajBnX2lDQTltWGhVRUVQU2VpOW9EV3VXcmkyZS1lUHB4YXkxbk94WXBvb1pCcndKSlVzVm9FSDFhdHYxQkNramNqUGRpMy03amhucXJhLWhMZ3dqUFVZZDdEUk4tM0FlWkVBWHNPdTU5c1VtZUlIaFFCSzcwZ1J0Q1VYckFiYTJZcU9Hc043aEsteFhxSjZDTTdPdXB4bU8xYlpCVjJEWm0wR25nbDdEMENiMHpXbGJkVDlDRmM2RnZobWJtblo4TXZVN0Z3M0h1YWl6TzBQaW9kUmlHRGZBQzFaQmFTOEpsYzRCZF9UdVFoa0pqOTVsdTFHc1hmc3Rfa2gyMmtqdEh2dnpUWk1Ha0xmWXp2cjBSXzJHenFobGJlcGMta1Y0UFpmX2N5b19aNm9ORWxGcTFiQmUtaG5CbEZPRFU1a044Rjh5ZkFBckdya2lUMlFXUU5DX0RhYTBJa2g4MWt3amNjQVotODZLVXRFR1B2V2VWWkVEanVlX1FQaTQ2OTFPem1jOC1tUlotVE83bGlzejA3WU1INTV4c0ZnaEJkQkJPeFB1RHg5QVlwTjFIb2hLNTFweUNDUDhVdTBjTThyYy1DYWxvRktLanpyM0hpOFRQamxvX1doanl0Y1J1SUhJZ2pwekc3RHp4X2NydlJIVVEwVlVGMEFILURPYk1mTlgxZ2tLSUlTRWh5dDNPNU5tOW53YTM2UTRTU01OeW00cjdrN0h3Q2FmT19zUUF1eHZBa1FvV1dMR1pxdEZHUVFHblM2UkN4ZTN5dHlPTnVjV214MFdESkw0bWxYLVZYaTlOWU1wTWVySEtOdGc3dUxoU3JkQVdHTHI0U3hycF9HWkpPRC1RcFBXUU1QY3lJbDJJdnlyOGxVdjk3Z1h2d1RmaDkzZVZQTmh2aW5OSVc1T1Q0T1l1eG5iNVQ2SEhFUVJ3QkFFclkxWGpEQlFvR2lWNlkyV0hOeVJ6TUtkMFpKZnU0eVg3TWppQVFZTjFNSXVLVWFNMUU3dWUxWmU4djFIUXB1Mjdabi1hTC0wb2x1aGlaWHN0VDdWUjZXaFBua3NKYktXa3ZKSngtcUNBTUxMTTNrbEgyWVlGeTZlRU9nUHRTR2x2N0R6a2JUX1JxaHE3SVNBaWEyRnM2bDRtT0pnbnJwakN6OWRkcnFyQUdFNDN0eWFhem51dU5oOVkxdTRpVHFDa0U4YzUzQkJsOGZ1OEFXTWZuUGNPb0luZ01OX2lCbFl4NG1xS2xZMHpmSFc0Mm0zX0J2RDFuN3RkVUhMampmbGZWanRJaGNyZ1p2bmczR1d2eGU3RXZpLXB4emJoRkxCcDJySnlRSzJyenp2aDZPbFN2V0loRkUzUE05X010VHZzXy1OQ1lTRlBsX1JfNldDY3ZHUDFNYVg5OVhkYXFqSUZad25OSWRYNjRmZzRtYUVYRmRzNWVsa2NCMDJGUUZMNXZaUV9FRnF4Z0hFSnp0NUhmdlQwWTBLRjM4RXdHbE5YNjM5eEZnVlEwVzBmTmlHSTd5cVJIZkV3YUpoWHlZa3NyZ0h3d1lNY3hJN0R5aG5yQTVfVXZ1RkhRMkVuUlRwRTREMVZHa0J3Z0dybkE1WVBNOWZqMjAtd0RYTEN6dUxmYzhXb1BYcmVOTDU1d3pyOTFKZ1h1QkF5N3VvRUJRUGUwWEsydFlRcnlSYTMxU3ZEUGR0X0FfRUpQeEpvTklyV0l1YXk4WDBUSDZzWDV5NzJKSmhBVHdBa2t0bmZiTWNjVXpCNVZRdnFabG9IRjg5alM2cExfa1BjS2IxQ1dPNXZnbUU0V2d5LUVDd0FVQlRMWmpQb2FxbFktellhZzUtWW91VmpsVlh0cXhOYzVBUjI5ZndTVFNNRlVfeGVRVkctSGF4aDhNQndVYzNRTXdPYjlFb29naDdVMl9uVFRWUmp3Y3d5SUZQYXRoNmxFbEpfYTZlMHg3WExIb0RBZmd6TTFZM1NRR0Z5MVRWcUdGVFBuRERMY2lEdG1RdHh5emtqbXFOcERLMlNZNFJyaGIyOE95MHItNlVmVmZUVFN0NHI2Q0J4VTBGUXdpdnNWczVWR1VFc3R3WEh0OFdrQ01TTWVKcm9Uc2VyRktOc200SkpyWkhEcDJQV2VZd1E5RFFZb1FMMHBIWGtjaWE5RlhTT1pwTGhCR09DZFhKdGdqQUJLVGNqbmpNOEJzOE15RmdUSnRiS2pFQWxwRDNVWlFQblBvMzNtdm1Zb3RXTzVpSF9pZF9IV3lpSkI3ZDMzaTFPU0ttOUxWdl9Tc29QaEtzQkxyQ2RfT3JHLW0zampUb0V3OE9XaWlKVzY3MDljWnFvRXJpSGs0MDdYZkJQb1RIVE5TS3FZTWJ4czVfYVpaQUZEcTM0QU00NWZ1cWV5OVo5eEpLeGxfZExTUDZXRlRBVnFxV2RwVUZaQkt3UGZUNzdjSC1Wd1REZUI3MkFXWEZGLWhOb2V6VUhwT0tzSGsyQ3Roc1NDbFVuZFl3YTlnVUxHa0VRSHZONlVLT0E4Y1pwV0NEMzdqakQ3V1ItVEhVSmdXX0otSkY1dmNVMHhvMUJLa3FtQUU0S2kwWGJWeklvcWdjcXRvT1N4dmhBaVVINmcwSHNwdC14RVRPMGwwVUx1ZnVSLTktYmo5bFVIUG5aS3Q0TUxrdXJYTnpsZWNNZGtwNkNfUDM1QTRBNzVTSkxuY1RVbnJPdU5iemxNU29TWW8yNk1ZaFZ1WUpQcVJHTkRtZmZqblp6ODFfaks0a1o4R3VxQ0g2YTdnTHhTeDNkWFdsb0lIVnhCdm1SUzNRamdlZURiMnU1emNWZmNFZnEycHpuaVRSdXJpeFJkVHR3bG5SUmFfd2haWHNoNkxKYkZyQlBibldzYmNWTmNHUHVEZlgzWVp2Q0lYNnEzTTlERFhXd3NYNHc5cG1XTWV6NXlnTE93eWdLLXNIMEJabnh6QzlobWo1ZWd6UzE0VTlGUFBGM3lQWXZTQi1qYW92S1hLV1NYRU8tOWxQa1VyV1ZtN0J2OU5MLThlbVRFMWFoRmUzWFlHZERBdjVKd1FsSnozVVlCNUlDbU03QnRUcElOQWZfM3M0WHBIRTNmSFZFODBlQXhjUmtZUHo0Nlh6ZnBMVmd6czVUVzdZbTdNdGVHOXdMTzRJQ0F1ZXYtRGRiYXM4LWtvUjBYWjFsOENmLXJPdzg1REdvYUNhb1E1dHowNVZ1VWtpV29peS1fX1dMelV1Z0l5N05rOS11dU5tTVRvaGVFblVWeEpUVFlVV0tFNWxrSVR0YnprX29obXd6QTFiTmVVMjRHYXlvVGFFZE0wampPUldJVmFqamNwaEFHQ3VDV29wdUIzS05jandiQ0VrbWhYZDdMSkg5eE1KSFQxdjdXUGRJNFFDMXZhWEdIYjRwNFJKNzI3LWlQWlctb3RlRG9pcnB3NjdxanhYX2tBNWE4NVYyYWxsZmhlQVd0aHBlWERwYmZyMjYzY3BWOVRwbGJhWWJPVUtGazIyTWU5R0NLMXVieEl1bV9MWkhZWlRRcUlUZUs5TzZaRTE5S0xJclhNd1h6Wl94OGlHcjR6SmtIWWhsREVEc0xhbHZUazJtemt3d1lBeE9lMW5LNnhQUnlJNlF2MU5xTjlJa0JScUZnTUxzaUlISjZOTGUzOFR6dEJwTWNBRnJxXzF6d3Z2UmN6X0VqbDQtSTRIR2dGbkVYbzlvTndTXzl3WTlxMEl5Y3BVVlQzTXk0X3pzTThjOXdSNEFRNUhmRDg1RHhJQWxaQ2xjenpqanlrMi1MLW13UXJ2ZXF1eVgwc1RXV0dKcnhyd0JCeVQ1S3pEQlZNNExBWENPSzlTV19jMU9fWGlRTW9WdlVWODNnZkVTY3pTX0M0SHBoMTZ5MGtRelBRdmlpNjM3am94bGw5NzdNQTVjTWN5dTh6QWZlYjItdzVzcTdMTzhuMGQwMjVuQ3ZjMkFZN215d2xGdnQyVmhRM1plcWo5a09TbHBVdnlRd29LV2R1SkNYNDlMQjRpTmd1N1NybHA0WnFTWTNzNkd3VXlqTVZPS0tZRzUtV0c1UWl1cmVqSm1sa182aVpEdS12UmJYVTl4cUsyUlJrRk0wZW9JQW5MdGctM1lEWGdEOFJVREFPeFBlR3FrWWkza1JlZHRxUTBxN1pkZ2Vnd3cwQ3AycnBHWDJkdHFaR3UzaThfRzdBWXJ1cEt6T2c5YjI1MVVHcEhJUGtrLUFTRWdBS2MwZktJSDZ4SUU5OHhRYng3ejgzTnM4aEdGU3VoSGdWVURUZ1BxaVlEVm80RjR1QXZzaGEzTEdrTVd0RDNwa00tZUtlSzJUNGIwTEZoTG0xN1JHcGVvZ0FFUl9XZmUxeUdpZU5TSWFEeExsSmJrYlhqNHJ0bjVsYWpLbjVjcHEtTlZFSm5TSGJkNC15am5BSjN6Rm9PcW52dkFzU2Z5Z1pMQ19MaXBjWHRFN2UySWNxOWY2aVJDYlFXX0E4LXk1LU5MRGczTUpBekQ2M1ptajgwMUx6QXgzSEx6NV82QUYzYjBlWFFobTlJZFRMNzhSSWxBWVBGY2dmU3hCVGo3dHQ3UEYzQWZrSDFjTi1CajN4eFVoTk1uZkw5MmQ4QmJReFQ5ODN3YTJ6Q3NlcWt3TVRQSDk5VURSTi03RkpzUUFYN2ctUUZ1aVpIVW5xQzRZdXZ3Y0V2SC1lMmdYX0JnVWRYTzRueTBUNkU5YVd6UmpkOE5WanZUNmtoVjR3MWtKdTZsRkE2Y0ViMXZNMXZZX1hPZDktS0xSREdDUDlzc2NIOXlQY19Va1NUakRYXzgzM3Nyb2ZwY0UwaTlsNlQ1VlpBdDZiaUx5SXVVQm5HdVRRZ2J2R2g5cUhKRjlHMWdjQXktMkx1QXN1LXozR2EyWVRzejFCaGtKR0M2cnctYlhRVEFjTzJVM29xQXNUOU1zVEVOYl9tTnhyVWN5NDk0RlNkRDVJY3FuMWNlbnFQRWo1WjN3Uy0yRnptLU44SzRXU1IzVHIyMkdYWDIycXhqX1pLSjk2Y0dpYm5vVGdSamhyVTFJd3J6TV9ZMW1FZE1kVUJJWVJZcGRxbG9BbGEzTlJ2d2lFS040a2ltUk16SFZ0RVNMNVNEWlFkX3VkOHB1MG5wNDFibTQzb2dsRUZrRHJzTVlkbzRaVEFKUlp2TWhIT0x4MElOUnZfOVdSZzRJemN1bTE1d3VfSHJJSnFHbDZBMVhXRGRsWW5mTmVFWkJHdS1PcWkzQ0NmSEZNalVPNWNKMHFzOElUbHNnYTVzYXN3TDFUWkVhYkJDcHg5dENPcHRWWnBibS02Rm1NSVZoOWFlZnBOSVpuc2NjS05oR0J2RGFXdEtPVTBvQkxMTk1NWUg5aE02S1BycnlSTzFlQkw3ZTdvSGVoQng0Wl94SjM1Qk9Rd2JLUWV5aXlZTEt5ZnFScmNaZjQ3SGZQNTd0ajkwOFZBbG1vLUtmak5RckNqV2pST2hyZFJBNHpQUUI5ZmFiQVFZYk54NEQzUWZYblJjVzVDYXJQYnJjZ3g3a2hQTmVENEQ3U1gxc1Y3SFpsSC1GM3I1R3F3NUdEdW1PalF4emNYWjN5RW5vOEpqdGZCZFl4V3pIczJEd1lTY0NDUDhFbmdaa2FQd1RWOXNIT0pfUGd4REhBT3FtMkIyOFRfbXRNeWJseFhXWHhwbjJDVWQwWm13LUh2WkVLRV80RkxyV0k1QTI3cVdwX19YTko1R1RuaW9wVmNKc2lBdDZhTW0yanBQa0R5eUxFX1dxUThaM2pQLXVrTnJ2TmVjNFBBSHRRbEI1ejduNmJucW9MOXlMVWFQQ0tlcUJWdGVwb2NhZlI4VzZRQmphdzBr)
        xcode: latest
        cocoapods: default
      triggering:
        events:
          - push
          - tag
          - pull_request
        branch_patterns:
          - pattern: 'master'
            include: true
            source: true
      scripts:
        - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
          script: |
            keychain initialize
        - name: 
          script: |
            app-store-connect fetch-signing-files $BUNDLE_ID --type IOS_APP_STORE --create
        - name: Use system default keychain
          script: |
            keychain add-certificates
        - name: Set up code signing settings on Xcode project
          script: |
            xcode-project use-profiles
        - name: Increment build number
          script: |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR
            agvtool new-version -all $(($BUILD_NUMBER + 1))
        - name: Build ipa for distribution
          script: |
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
      artifacts:
        - build/ios/ipa/*.ipa
        - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
      publishing:
        app_store_connect:                 
          apple_id: suhajda.kevin.ferenc@gmail.com   
          password: Encrypted(Z0FBQUFBQmZsWnNDZEtWU0ptQk9kd1RjWV9idFQ5WFBRdnVZMnJRTjBxRkpHOG1MVlAwUGpjUU11dWZuMFZpSm1tWk9ka1RqRHNQUVhHeEM2cThTUnFmM0Q4SVc4MWZxbXdfalA0QlF3eTVUSVJqcjRraEZ4RHM9)
        email:
            recipients:
            - kevin@nevercode.io

workflows:
    ios-swiftly:
      name: ios_swiftly
      environment:
        vars:
          XCODE_WORKSPACE: "swiftly.xcworkspace"
          XCODE_SCHEME: "swiftly"
          BUNDLE_ID: "io.codemagic.swiftlyr"
          APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmZsYUJnQW8zQVF6eXEtYmZhekJTZzR3MXBiclE3djlrQzcxeWw0Z2tNcWJVbUVxRnYyT1pXUXNSSzEyS2VpMDMwc0tZR0NoUDIyUXFHTC1Xc25fT0VMeEhjV2lmamZTdDVCWWxTMFJua0tWZFh4UmIxelY4MDd1TE03cFpWZ0J1VENDRFk=)
          APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmZsYUI4NmNFcnVySThyclJKYjFZeWdnYW5WNmd6XzRLMVl4ZDZFWFZYS05Hb0w5eWhPWHRCMHc2STV1S0V3WVAwdldIN3hPczFncnBKYU82NXJXV1g5RHltTnc9PQ==)
          APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsYUNaOHluSUUzUnhRQTZHeGg4OEZYS0puV2tBQ184dFpxaExUZTBHQ0w1RHEzYmUzMkcwa3A2T21mTE5YR0diVzBNWWk0VmFmV3NKNGlORDZXTFZiVndRSER2RDhXaDFZd2FNckl5cHRna2pfek5vVF9qbF9tZ0ZPbzl4UktpajN5dWx2czBqOEtYd2NzX0xPeUxTeWhFOGQ4OUdkOENKTGpyc09Td3k5N0YwbTYxb1U3cGtqNUwxeHZOdGpJdy1hNUZJTEpqRjhCdnBzWWNaTWE3QVNDQ3lYUUg5MWZHaGhWdWVDZ0x1bzhTRnBHSUI5NmFvZ1N0S2xOU0taZzN3QlotRTZrZ3VCTmhTdlpLdGxXM1B6Ykg0RTdBQ3F0eVV6dEdZUFlnMllwRE5JVjRFajhCUVZrdWlhZVZfTDV6UFRNaGdjZ01JV0FmY25vZ3c2MkMwekJod2czMTlKbUNaRFFRbzhCSFVZWVRJNTFIZjFadmxmYmFDd0FabWtIMUdUNld1ZS1lM2I3MFF6N3h1Ul9ETXh0amhRMmpES09TV003VjgxUl82RDNVTFpKdz0=)
          CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsYWVGMzZ1NXFsWjRyc2tBdHk3ZFlUR1pfSUpHRUROME4zeHE1NzFSU2Jpdzd0dnZVTnVXVzNPaGc1dGloMXMtTWZjSGxJZEQ1OUJpYTZCOXMxVXpTOVNWSWc0eDRfb29KRk00ZlVhQjNXOXJYZm9UT21NcVEtQm1xQmNCZlVxaTJtbk5KdUg0dHVkclFzekpNSFg1blg5TDhGUXlMQy1WV1ZGcXNnREJwTzdMT0QwVEhxUEVoMC1DTWkwblk4b1A3MnRNSHJEZ2RDdXFSWEJlRGRLV25OTjlBSG9EZVdJMk9OcWdqclh6RWpFQVpEZWU4YWI0emEwTndHOXFiN2FIcHYtcXFpMHV2QjJEcndWcVc3di1DMVV2V2FNaTJrdG1HSXR1OVIwSG1Fdm9sN29wQXNWY1hZbmlnNmtfN2NlanJtV291cDJwNG9LVjFkRzM2azhaYmZLakV6ZDBYZDVWb3BkLXNTZm5xOWhFMzQyLXFOM0hucVRWbjgwSW5LOXJyUzRLS05jbXNFYlNJOGx5bE5FT1hjYTRTT3hNOFFiUjlOTXV6d2lTOU8tb2NyZUxkdWFTbTlySlFwekRlSEQ2R2FaQUNMOTFqb21hQ00xVkxWakJhMGJudjVIb3BRSEM1TnIxZUtnZTVoWklOd040cGlyZXV2TnBWN0tqQUhxYllEZ2V1NXo3amFoZFF6VFpKSG1za0pDMzd1dnZQblBsc3JLN3BRRHdYallnZUExQUR0dHF0c0pEb2V4bkNzVXI5R3VJa29nQmUtMTNsc29WRmtzbnRCYmx6QjZFWWNxM2J0bDA1TmVGM05wcDd6MGZBVTNWM1R2Y1VZZHZ6MHgyUmU5VlcxanhTUFdHdFNzSFhOZVhDV18tWkN0S2RreHBCQmNPck94akVRejY5dDdYU1Y0VFpIb1B6MUc4OExDYnBkUWlLTjFwcVU5azdqVXdGU01GdlZEc29VOWtvNFo0QWNqdDR2UFdiLWo3XzdjdFNJZG15RV8zU0dYWUV3SkoydjBJcjIyaUx3MDJwUmRHeGVHeW05OV9TSmllTWV6aTNPV21mQXl5ZDVCUVB1NC03MzJvdVEwUGxaTG5MNkJfVmIxTDBsZHBjYVlRTHpJMC1JUHFsTFpoRkpZamNfSkRZRW9ZLU1aTnVHQTBOT1JTSUNBQ2NnaTN5SHFYN3VSZnBod19QWlBWNUVNUEprZGJkc0VRVU9xbW51SVIzYVFTMTE5X3ljX0lKNWRWMTVrRFh4clBuRm42UEl4UmlwRDVBMXc4enE3ZWpNNHdNVlRsT2tiNjRmNERUMVBSbWNqNV83Y250Y2hGbzNUR0JaUFJzdkhESjNYU3ZsMFg2NlFFbjZjeDdZMlQ4ZEd3UFRXeXU0aG9IdWZKcUExOXZ3TlRuQjYzWTdISWF3dkRXQ2NVS2htRXptQWhrZl94ZTZkWEkyc2htWWxOcUFWQ3JvXzZ3b1E0aHhIZjRoZGtHNHFqVWhRU0JRT0tLS3BaQ1ZDTWpBazl6c3FnM3lhdHByZHZqREt1bHE5QVo4Q2d2TmctRHdzTUF3ZzVRbzRhNWJkVEdUdlZubEhpZUJrV0lNemhwczRwcldsUXY4bFRzeXRJb08wb3k3clJ6ZVZqSG5ud1VnTTM1bHZWb1RlUTZEaE80S01PTm1YV3NsX0o1QTFuSTByZ24tWWVvUDhDLTExbFFSM1lIb0EyQnVqVmNJMWV1cGJ1bWtHdHExTFRhY0U5cnVidWVrVWlIMWF1M2xtRTJTTXlVN2JadnRkajJFTGFxSlZQaU9URGJ5b2lpUmMwMlpwMHUySnRHUndwSkNwU0xVdXJSeXlwbUdvdThaUU9NWmhtOGRDUlNqcUhDbm13cFpsMnBCMDc4NEduSkpJYjhRRkNzV0dGVldocHBHTVBZemt5QTFOMlIxeGswUUpQTXE3REV4LUoxZ0gtR0Jldmw0RmZyYVhhaXpQR2xaTDZSaDhqUXJvV2FWNE1iVW5Dd0hwd1hBcENKWHRsT1hSQTBPeVBuVkc5VTdPRk1yU2lRZHBVdnVBenJWdmh5ZDVmZWNkbGhFSkxHWi1XY01UVG0waW9lR3BpLU9LcHc0S1lMRW5vSW8zWUR1Q3ByVnhqTWRiZmU2U2VGVERiamU4clZ5bHE5U1lHNzFwNWVxYWF6VHZxekdyYkJLTm1vWkZCSmJWeHFrVGtMbVppTEhPMlFtMTc0VTJKc0pBOFlTc25kQjRRYXNYaWVxT0NxN3BkNkZScXFjcEY5bFNZS3NTREQ0bXd5S2d0QTUteEFscm9kNmRnUTZUZVk5a3VXRDROT3AxMTdhN2lweWdNaWN4SHN1MXpBMkVmYjJUWUJPNWhOT3dmUjdtcW0xSUt5d2Mxc0UzcEFpTnVNQ25BdlRQcE9JaUR2QjluOUhwMlNwaWhDT2VTZGhVdU5kbnlVSk14QV80YkpJdno3VFlrVHFXT2lzemhmVmtLalBsLTF5NS1hOVVBUVBkNC1ZbkJpcHA0UUxRUEV1T3hfX2ZRdm5nd3psS2wtMTR1MS11V0QycEJLVzc0N0NFSU1lSzRhZ0FtbVZlRHlRZzZleXhkWmxoRk1fYU5NY3k1Ums5QUlKT1ZKT1M4Z2h5N1k0dmwxSFo0WG1LaE13OTVjazlNTGJGWGFfZVVpWkpneTRNSFU4LXpIbTNleUZoNDByck5leldYaUdZNGFnLWp6YzNpSlZrODlCcGVveVJ6Y3VxMjlYdzVhbVFHZmtNXzVGd1I1N2VBWXFfQkgzaGZXUDFWSG9vSGlsRVJUTTZ5X3FDRkZNeEdWdnNId1ZLOVh5R2wwUXBvNm11emFDMHJRRGZVLWQ2U3Ixb2dLd2p2LXFndWltUVhLbWdLODQyWmg2MUFwSzM2N0MxNlBtSFg4UmxuMlVqd1EwUE8wTmRpMHIxbWdzNlZNaVlFc3lMSWhUcmZGdFpUdmJnRHhKMGRDazk5ZVRVZ0NLSnJzcGJxY2FPNWItYV9HVmU1bENuRDQyeS1hXzRQc1l3Z25XU2dKQ1h2WmRDQ0tKRWFZNnZxVmRSa3E1N2o5RjNoQ3RDUDZYLW5FYkRUUTdTc2VZRHVJM2xROTFWOWprYVBtb2FkZm1nX1Z1dzhUR2RHMWVwbGpLdUV5RUNSbmhMOE1CY2k1VU9VbWN1cGFHeENPbEdrc2h4ZnFTNGk0X25kUzhQaEVGQmxucDlxSjd2QXByYWhyblNVQWc0OHBKMGxBOUdpUzUzRWhsaE1Nd0doN2J6N0l0VTlRUGZpOXVxYV9abGlFSTByWTkxU2g1OHJqa0VGc01FenNwMWc5SFdVSEVMNnJrMVRqRlJwa1hBM1c3Nk9CRzBoUGlEaDhHUUNpOGxvclNPcy1kMHhYX3RNTVVhWDV2Uy10all6V3F4c1dOUTlVcnNKV1JHNjNvQ0ROekc2a1RMNVJsQmtVRk44VmNCRHFJSk5oVzU5cERGRlFIWUVJaWJBMDloWGd2WVM3WC0xUklVV3VEREpITGtOZHNoZ2RZTUZtWEc1VHJ1ajNHV1FsWXJHcFowTDc1SlBFSzVVWENlWG93a096eF9MR2hjNUJ0dC1RMHZCSmpWQzMzbUYxRU5keEtsUFZ3RUdtVkRXcnFHVjlEZFNRUDItZldZMzRPelRsNk5tNFBrM3JiVU53UTJBQm5QTjg0Q1B2U2lTTUt0MDYwQXd5N2pmbGVueG1YMHB4Q1RGNGtzQ3hlekQySXA0OTRLWnFYM3V6dGp3NnVOdEpDOUt5SkJZM1JBcXlQMWJhdWMzMU9UWDR3a1pEQ2Y1U1RXWXVkQzRpTjE4bFNxN1M0VnRtN0pKYXRBaHJHWUJCYlFHcnMxYWxtdjVPRFFkbWhlNHBYMXFscmJIU2UxS0V4MnE0TGR3WlVoTHlfdEl6TFc5NGxfWTNTd3V2T3BHOWpVcU5EWUxzQjhITWFFeVVJNjlNWm9mUWtEWk5ncXBIT0pmRTh6LUdyY04za0k3M0pSUW5JVDk3YlAwdnU0TFV4dW1UV2cxcVFIbm5qMWhTbEdQZjNTNnUyaDhhWjFNVHZUbE1vcmpkZ1Z1RE5HT2k3RzJfT0xsamlMMTc1ejBVbEhrOTJWRDBEN21OUWNHcmtPYkNqRUg2bnYxQ0FNYWxhVnZrNmFpVTdIbGRBTC1YVXVMVy15TGdwcEYySVIxMmI4aVlTV3N2VzRhNENwQTdhSzdWU0xCazQ2cnhBWTNaREZjSzNGZnFKdE9xRnBKbGFBYUNYTW5qbWpieklUNVd3ejdnclhqNnM3VjhZUndqdHlrMGVsNXFkc0doNjhOaXItVXdYSTZCYzRCMzRZR0NXWGMtQlpGZHJ2N0s0OTItUzQteld0ZGEySGFpN0loYlcxbHdMQlFsU004X0VLQjF4VzV2NXQ1RVIzWjUtSFA3UW1jaHFMQzB0U290Ml9BN2E1TFduS1hodFYwWTR6RUY3bVd2VndMMHZUQlBHVnBFc3MwaEhfbGFiR1ZlSWlFdjNsSkl3NDlZdGZHMUVua2o4VlVZQW5Pby1xOWNxZEFiNjI3YzlDcm5KbXA5Nm9rVWpTcERHUkJFZE04VjE0MUtTdkpvUGU4U2l0amtNSU9rV0Jac2hZWEYtRVRwY1R5T0xPUkJDc1NYOVpkMVZ1TGtFaUVZMzcxdUczNkxJV183aWRRSGNTWHhqM2dHaEQxaktraXd3LUJGUm8tS0F4Tm9nd1FJb2Y4Nk9mNmc2eUZDWEJwOV9HOUZGcWhGbHF1eVVIeWJ6LUszOTNjVTBvVm5VeHhyalBuczNUQnRudFNZTHFDakVYekp6aHE2VURiWUZNVzl0czFnVGlLTlQ5YVlPS25tNGJNM3RzYkYyNElfTktRb3RuN3hHb3BPVlExMDYzSDF3RndzWHpPRmJ2Q2lqb0tCeUZ4Y3M0WGR2ZlkwUlBqVjR0dnVtNVJkSVhwYlloM3JRVTJmaGJsOWlQbWNDdnJoZ0VNZ2tYcTlTajh1TUFKNWtCcl92cHZDS2ptUjFBQWVtcnc5M0FkZGd2TDdXaHBHYnJJcGpRbmtrejhPTGl6LVhGck44SENmLTYtdmlqZ3B6RDZkN1pMOFN2RzkwNlZqbERzMHIya3I0aU1zYllZXzVDWmVORGJtZjQ5WXJnVEN5Umk1TlY5dklsMXAxM2dEcG9nQ29SMTRvUmtldE90MjZraGNuQ2JxM0R5NjFETUQ3TkdiZXdUcXJ5RFA5X05CTnpVSlJyRkx4Zk5ULVVfVkpIZVRMVXZsbGM4bzRUMXhtWVBPSElyS0tiQmNxeTkyM2dSblpKVm9TZlhjWFFBa1RfR2lkYS0xZ1NEZV9YWmN6eHZQSFNFcjJfa1NmaGl2UzdpZkFyMG1hd29OQzNYYnBSQmRaZmlJd2p6bVdYVklkbXBjd3ZTNUx6cWJjblg0Q0RFc0xvcXdmOVhKWllKWDNJRzFyR1VKdE43cUd4X2tsajhiVzV4bzhEejU5RFRsTWEzV1RPZ0d5RC11WFA5N3JGMDltUVNJZldKQ01wWDQwLUNGWEo2TkNSOUVacTdFNWtueWR0a1d4WEV4azJreGg2TmFsYnl0R3lqN1FYU3pVZzBrYWpHOEVheWtyTVdGMElIM3FJekdfNnNGV19XSFpwTjk3b3Iza25OSW9hTDBwd2NlZmNkU1pWaUMzdnJrSm5WLUtfY09VNl9VUTN5YWEza2xqbG1hOWQ0RFpaMkY3UGtpQlZtRG9xNW5PNms0NTBUbkVzdXVQVGxWUVdWTGRDTVljNXAwMnBPS2g5MlNNNk1VZnRZanRmVFBJSDI1ekRaeWhDV1lkYnl6bWxoXzNTS1JWLWNsWW1rVFA1blhoQVVwMVF5c0ZKbnRBTjVvVzRhNktGSkFKUHdaN0otZ05VMkgyUXRKbHhKQ0hVQzgtSThwY1hYRk1NdzFuWnJ6U3JfanlIeGNoSThnVTRETE1UUWVjMUVBMnE1RUNQb0lnYmQ4c1JNc2RSRU9PdUNZMGlTYXNJeURoekM2YXRtV0g5U1FXNTdaRVE4ZWhDYTNsRzBCeHJrZV9jaUF6eThRWTVBamdMRjJEdGtMQWpMNnFXemVoRW1kZmpWenNOZDNOZ0Z6SXFVVXo4S3labUNIdWkyWU8wel9NQ0dVUG5nR0dESEpTdzA1TFBFY1FPdkZab2lWamFaaE5VZnpaTmd3SEpJRGpDdDhaZ1FKQk9McWNoSVJ2WjlSdC1XeFNpcHpnMklXaENoOVpLU093UlJMQUI0TEZYMVZKZVgtT3dGVkFpRDVuTWQyNlRVT3A1bVNNOFlrczlvSjMwV1hCM1N6a0J0SFBNbXFFSnJOdERSR1VCZHhwendjVzJpendfYUE5bzlQOFJqV1Z0V2ZfU0d6SUdTb3JOUDl1Nmh2aVNGZkhoSk1fakZYNXBNdExpODc1TU44ZjVOdURGTURsR0h3VFhOVFdrZTZoQnB4NWxMTW9OODVUSjQ1SFRQTTdaNDVWOGlhaVJPTUE9PQ==)
        xcode: latest
        cocoapods: default
      triggering:
        events:
          - push
          - tag
          - pull_request
        branch_patterns:
          - pattern: 'master'
            include: true
            source: true
      scripts:
        - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
          script: |
            keychain initialize
        - name: 
          script: |
            app-store-connect fetch-signing-files $BUNDLE_ID --type IOS_APP_STORE --create
        - name: Use system default keychain
          script: |
            keychain add-certificates
        - name: Set up code signing settings on Xcode project
          script: |
            xcode-project use-profiles
        - name: Increment build number
          script: |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR
            agvtool new-version -all $(($BUILD_NUMBER + 1))
        - name: Build ipa for distribution
          script: |
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
      artifacts:
        - build/ios/ipa/*.ipa
        - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
      publishing:
        app_store_connect:                 
          apple_id: suhajda.kevin.ferenc@gmail.com   
          password: Encrypted(Z0FBQUFBQmZsYUM3YnBEUWdEbDFVSURmb0VydVlkZkthNkEwdFMxQ0JLTjhEeWM3VFNnREh5czRFOERNZ04yVHFKdGwxcDZSY2w4NzBQcUlNenEyZ3MzTDRvMV9GUVRDVlhaZjl4S1RJQWZaNUZJZVhKTkZma2M9)
        email:
            recipients:
            - kevin@nevercode.io

workflows:
    ios-swiftly:
      name: ios_swiftly
      environment:
        vars:
          XCODE_WORKSPACE: "swiftly.xcworkspace"
          XCODE_SCHEME: "swiftly"
          BUNDLE_ID: "io.codemagic.swiftly"
          APP_STORE_CONNECT_ISSUER_ID: R4K7ATGUDS
          APP_STORE_CONNECT_KEY_IDENTIFIER: 4b453230-51cb-40b6-bfbb-60e71ddaa13a
          APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYySVJyMHU5cksxNmFDNGlITFAwRnNOUF9haWlNWEEwdzAwT1hGOExqMXJlbjZ0WXR0eXNJQWdrUGtlWXhEVEprOWo2QzNnX2VTenhNSk1vQkpDc19YLUNmLVROcUY3NFdqbE1Fa0NKWVlKT0xNbTNGMTdrTlVvQk02VUdCNVZYak9QVUJ0UWlvNmEtbEU0NW9VYXI1X3pwYllYVzM0OThSRWhzY3ltYUlhYzdVUnVFMUpwd2V2VXo1bVhrcVZsMW9BTjJGQ3pJejZDRHFGNlRDSUV2ampmZ0NuYXFTSlk2VUkyNHJRUk9nMzNFNEpQZmg1TVkzS0pLN1NhdXRlQ2NxLWl4S2FWOXBkQ2pqREthOF8wN0FmbzFjOUo2RkZCZl92MHcwV0hxOVYyanNQRjM0SXFUSEJVUS1ZNzlscERMRThaSDBPVmh5WnNSdnkyQnd1NjZfcDlRZm1Gd0NVZTBoMHk4amFtNVJZT0FiNUp2TlVEb2JfUGdYd2o5TzRGWkw3cE9lTFY0YmdVekpjeWFhcVF0VXRZUFNqUkxjRW5hVzkwelBteTdlWVM1MWltcz0=)
          CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYySVV1NmFJNjJaYUgta0dUNDk4R1RlSTNSaVRMMEtGVGVYZWd6andtcTVLdVFEXzZTdlJ2X0l1YWhzNXZ2d2ttbHR4V3RSbjZrWlhvRlZpOFpGOWFoc09jX3lYT2NqNEluaHl2bzducjQwWndBQ045M291Zm5QWjB4MnQ1anhPcmNibFpET3NvaERyaVphRkY5OUpxZ0V4eXBRM0FDXzVvZVU3VUxhWnAwUFRfMklQT1dvSmh6eENLTUdObXRYdGtjbnlUTWlTNU1NZFdiVHZRRFY3VEJGem5JVk9rNVluQUhsUE5FVmJrZDZFODdqN2hhc1dCekdOQTdxQmRPSGhETTl6SHdZUzBnbE1FVnI1ZjdvNGNGcTFfVEpvc3ZXdTg1OG9aWVJ4TS1LdnNBM0UxQUZJQ01KZmFqbHI4Q2VNc3ZGNk1idElHVzN0Vi1WX1JHcktRLVNmVUUzVnZsYTZ5Rlc5azJHbXdPbDU4d1hjYjdaTWpSeVdieHRrbnlvenJlWVo2a04xUTlseGlKN1pQR1hNYkpaaGpBbDFoTlAtXzhSN0I3X0FGZkRuaTJpb0lBREdWY3pheWtXdllmSWVLV2x6bTB1c3Nxc1RxOEptckhQVmJERVpvVWVSTEhJRVlvellyTldBcUJMckY4WnlfVFlrQXRQR1hWX185TDQtWW4zanRyNEFZR3h6M1ROR2lDSW00YlhXaHJvdnZBSldpQVhxdFo0TmxzNk5YckNaaDZZU1A2R2g3S19tQUp6QWo1bnl1eEdMZUNBX2QxandlaEYzb0Z0Q3kyMWFkSDZqSGN1VndIdjk3YWRad2QwV0Nabm1seWtRODRFSWVPOHRPdlJ1MV9UT1QxcTg0UDRjZ0VNaFEtSS1Kd2s5ZGRYTVlHYXZNVjkzZC1VNnZXLXU5NWtGZjFpb0FNRzZvMjZmMUd4M3NGdFkyLVgwX2REdTQ5VDZYMHAwMnNZeWc5VEtONjVnQWtZZE4wZGZsazRaeU9IQXNpeFNJaGpOUmNIOUt0eGdpZU5rN2VEZDNzX2hob2JZNTh5NFVZNWI3WjhHOWdyQ2gyLXA1UkxzR1E1VVZ4eF9xdFJMZU5IU090SzRFSkVSZTZYOFROdFoyd2NXVVpTWHVwSnN0MElSN0ZReEY4MG5XdV9uWDJqeUVnT3VvN1BYV1JsaFp4alg0NmFMVGk4VUxZdGZPbERlQ3FXOUdHQmpOeExLY0RMQkg5ZEFrV3QwN1Fqa1d1ZmtoTVM3U3ZzSWp1MHJRSHlhanJRWGM3SVVoMy1GY0UtTlVYaGMzRmt2eXlYZWpUVlZxekFoWUtoM1BWY2o2eTdpd2I5bEdqM0pReWJmaDlqLXhCRUhmZHJxQ3VaNGZtZ3JVSFB1dXZhcmJGU0poYTNwTjc0clVpbjhlWWZnSG1Qbjd4eTZEUkV6YjU3YzFEQTd5OUhQZVRscVRlQlc3QzNEMldDR1BqejlxSXdpdWo2WlJXV3hYSUE4Z0FEaW5vWjYzQS1peGh3RDR2ZVhKd2VxTVhTZnJpUm1JNXpCc3Qwb3hSdWxMb0E5cjB5MHhBTVVUZ0wxNTQyUkhnWENiLW9wNkZ1TElnVnJqTVRfN3lBSUY1UTh0WGR1MUxQRHhoTGNHdWdYeHZCZU9Xb2lVcXM3dzhhOFRwdzNyTVdBaE5iczlCUHU4and4T2JFdjk0Y1NXLWFvcEhjRGljdm9hRUhRTElUY0MwQjU0eXJFTTMyZm00VkZLdWZpdzJmYlE0UkhtTWtXdDlPUDJhYXRTWXV5Y1I3c3RNRF9QcDMtVGQ3am16XzZXajlIbVhKTHdCTzhjcUQ5TlpDRk5nVjFjMTR5RFV3Y1BHN0JnWUxrejNib2h4TzctaVl1aGtwRjIzX0tOWFJUWHQybTNQSkUzMUxyNWJmTlNLMTB1VWVSNm1xem96WkdvamRFT3RSck9LN2F2czdXbzhLaF90RFRlSG55Z2JLV3VzY3gyWGkta1Z6NHRoMWtoM1p5dkVjS2otc3RUNjk4OFB6OGVzRjJMRXhuZmFxRXBRRjRKUHc2RWVCNE1iaklMd21SQWdORVl2eUNpY2dhaWdkalVySXpjYm52ZVRFS1NROHpCZ3JhSjFDclZSYzRWeW5rUHcxMU8tdnI5eU5GR1BUdzJVdkswaF83VTg4R0FGREx4eVRWRllrTlJneW1NTkljRU1tVXdlbDNSdjFJVG5FemxuVlpQTGV2T1A3TUVYbmN1OXhnWnpvZlJqU0JTZWRDMXFNUklMSDBnVmo1MWNVUmlOaXU4MGgxVEFnaEhlcHZuNXloYUFHWXA4LXYxZGtlWXFieDVyQnhjeHZ4RjJ2ZllZTXJGQnBDSzZTWkh4UWd4azdKR0ptd2lsSTVqQjIzQ3BpMW1IbW96VE5DMldnUWJ4eEJDQW1LeG1JQzNkWG9ydW9sRndfVGtUTDdZcnNkb01MZHZWZ184MVNpX0VVeF9fWFBXaUJTaXk2UDItRkJyVTFpcTlINWhPMlhmSTFod0s5YjJUS1RMMFNqYjVjcFMtSzdEMndBMzdySjZUWktlc1R3b0pZbWxLRGE4M3V4bjJ5TG9OY3ZaeVRneTRTYXBHUE9HdTlrNG5CWXQyNV9XcFAyMVNqYVEzNkZ2bUY1d1lxcTdmNThReGRvdGUyclk3NkZzSmpOM2ZBemVvdmhPMzVQS1VOVmk2NHVpR0dDTkExYlprYkxJSTY1NWFMTHlyeEJwdm1jWHlWV2V6LVE5VGxUd3RKWlNpbS1KVll1c3FGTENjZ2JPTlFCdjgyanNSWDJRcnZLQVNaeEJJVUlvbVFuUVF3VU0ydXg4YnliblFTdGxzT2ZlSEJHd2Jqd3c5dUpfb0tBalVXdDZ3eExqVzdJckk2VUJXQWVIMnotb2RCRmNSbGQ4bVZTZ0Q4d3VzQ0dDc1YyS28zdFVnTDBYWk5JWWVpTzJhbnY2SU9pS2U3UEJ2SmZ2Qjd3LUpTbVVoTFZEOVVwR0haRkstTVZ2UEdZMTUxQzFEQ2ZKUUNoTEt1c0xvQlVqeTQxbFlUaU9RekRHZkRqc2V2OTRqQXZZ)
        xcode: latest
        cocoapods: default
      triggering:
        events:
          - push
          - tag
          - pull_request
        branch_patterns:
          - pattern: 'develop'
            include: true
            source: true
      scripts:
        - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
          script: |
            keychain initialize
        - name: Fetch signing files
          script: |
            app-store-connect fetch-signing-files $BUNDLE_ID --type IOS_APP_STORE --create
        - name: Use system default keychain
          script: |
            keychain add-certificates
        - name: Set up code signing settings on Xcode project
          script: |
            xcode-project use-profiles
        - name: Increment build number
          script: |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR
            agvtool new-version -all $(($BUILD_NUMBER + 80))
        - name: Build ipa for distribution
          script: |
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
      artifacts:
        - build/ios/ipa/*.ipa
        - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
      publishing:
        app_store_connect:                 
          apple_id: suhajda.kevin.ferenc@gmail.com   
          password: Encrypted(Z0FBQUFBQmZtQmhXUngzTVEzekxTeW1CMFg2bV9vdXR1Q3hyZUliNEs4QjRibDZucjJITVI0bkV6WXZCMk5VcmxhcExNNFgzdjZuLUpmNldDZktmd1RuamJhUVkxUGpXcEZwVVh2VkFLUktvNE1hSjdkVUJ2N3M9)
        email:
            recipients:
            - kevin@nevercode.io

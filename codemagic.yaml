workflows:
    ios-swiftly:
      name: ios_swiftly
      environment:
        vars:
          XCODE_WORKSPACE: "swiftly.xcworkspace"
          XCODE_SCHEME: "swiftly"
          BUNDLE_ID: "io.codemagic.swiftlyr"
          APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmZsYUJnQW8zQVF6eXEtYmZhekJTZzR3MXBiclE3djlrQzcxeWw0Z2tNcWJVbUVxRnYyT1pXUXNSSzEyS2VpMDMwc0tZR0NoUDIyUXFHTC1Xc25fT0VMeEhjV2lmamZTdDVCWWxTMFJua0tWZFh4UmIxelY4MDd1TE03cFpWZ0J1VENDRFk=)
          APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmZsYUI4NmNFcnVySThyclJKYjFZeWdnYW5WNmd6XzRLMVl4ZDZFWFZYS05Hb0w5eWhPWHRCMHc2STV1S0V3WVAwdldIN3hPczFncnBKYU82NXJXV1g5RHltTnc9PQ==)
          APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsYUNaOHluSUUzUnhRQTZHeGg4OEZYS0puV2tBQ184dFpxaExUZTBHQ0w1RHEzYmUzMkcwa3A2T21mTE5YR0diVzBNWWk0VmFmV3NKNGlORDZXTFZiVndRSER2RDhXaDFZd2FNckl5cHRna2pfek5vVF9qbF9tZ0ZPbzl4UktpajN5dWx2czBqOEtYd2NzX0xPeUxTeWhFOGQ4OUdkOENKTGpyc09Td3k5N0YwbTYxb1U3cGtqNUwxeHZOdGpJdy1hNUZJTEpqRjhCdnBzWWNaTWE3QVNDQ3lYUUg5MWZHaGhWdWVDZ0x1bzhTRnBHSUI5NmFvZ1N0S2xOU0taZzN3QlotRTZrZ3VCTmhTdlpLdGxXM1B6Ykg0RTdBQ3F0eVV6dEdZUFlnMllwRE5JVjRFajhCUVZrdWlhZVZfTDV6UFRNaGdjZ01JV0FmY25vZ3c2MkMwekJod2czMTlKbUNaRFFRbzhCSFVZWVRJNTFIZjFadmxmYmFDd0FabWtIMUdUNld1ZS1lM2I3MFF6N3h1Ul9ETXh0amhRMmpES09TV003VjgxUl82RDNVTFpKdz0=)
          CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZsYVBSb3ZGRjlWSVJRVEFLMWhHMDhXdjRJNDFwbDUwQmN2eEJOZ0lJbzQ5ajBIMEx4Y0E2emV6Nk14OHlZMTJTMENZOGJSVlRrdjVrQVJzUG9TSnY4Um5uaE5ScVJfUmlrOXdyS2tUUFJ2eTlkSkkwMHEyR0pwcnBSZm14dzJjbmFnc1o1cExXN190QWpBeEg2VDg2aW94LVRYWGhPV1NxVzlfWnI2d2dBYVc4VTdpWjRuMHpreERKalJTQUlYZ0JIZzJPTXNmdkRFSW4wZ25NSThCeGIzWDk1U09ENHhHdkgtdnpRVzZrcFpQTW1qZUhoNDQ4QVNNSEtPOTAybUpyMEFHSmFMQ2lkeVNSLUE2X25WZzJrbHFpNW5Lc1JPVXAzRHUxc3hvSFJiSGQ2Ni1xZmtKVnlESWk5LTBYVWxYODR3clhiX1d6TUpvUUlReGI4UGQ3ZlVvbkdaOXRFY3c3WTU1VTJQenFfa0JzaDVoaHNEM0RwNnJyblRhMlhBRlB2Rzk4RWtUb0pjWDYzR2VYT1gyQlBpNlpvNy1LanVkR1EzTm1IZkpaZUpVc3k3ZTd5VzRwNG1uc3c1R3l2bkNVODBGdW5xSTZya09WODNYWFZlc1RsLUJWUzFjOU5UQjYxUTFSWHdtSUQway1acHl0N2RaR3diOENnV0I4dEJsTWk0N0FyU1lrdzdCalZ5NE9MUU9XYkdIRzk3Z1U0OS05Yk5Sc2o3OXh3U3VMS2NjaEZ0NEV4aThoSnk0blVFNGl5RmVrX1Z0cnJnU1FHMEpfSC16ckxTS1R0QndHaEZiLWJuTEhtbzUyREo0OEllMFdrV0JOMW04a0ROVko3OWwwNlg3Nm9mQ0xUZ0k4YTVoQTgzdThVVktLUWM1NHhINklmZ2pxZ2xYUEdGdFQ0d2drNEl6UGlHejV6V2dQdk4tR3RETU1tZU9iVm1SWVNrUFBFS1JXNlVDWENIR29WTUs3bm14QXoxY045c1ZSN09rMjk3cXpGempqVms1VkJaS1Q1X0NEMEtxVG1yRUdIbUZvekJlZ0NtbkJhYUhNMHpkamdLeWpKMGRLc1FLQW5fN0hhaEtoWC1QLWFGalloUzlidTdjOFYtaUZkbVk2RDZIQUFVM1JZOFcxcjRaQkFScVNvRnN6czY5Z0ZHOTdWNjNGNFd4a0lFZ1FIWHB1bmpCdmh5ODZLVXVuTlVHVV9qODR6cHFIMzNZSUFaVWlwN3hzalY1Wm9MZmVLYkJUX2p3aVpPamtibGpMSW9xd2dCWE9jajdnbXBlVm9uWnFuZG1tQ093WGxYeFQxT25KbU5oQS1DN1lmYzhQZWJfa0o3eWlHaVlGN0NTa0duaEpoSGx4ekVuNmNJbVN2SWdUUzFNSG9xRmYxbVNjOVZpSnZIWGhyXzg4NE9VUW5MZmdVNnZWUXJRYWdkTy0zVTY0WUt5d0hTTk1aUUhLTmNLSlY5c2o4QmlYRjlzMUFwcTljRHpTTVR0VEtXaDNpYlp6SXBEQkUza1hmZ1dBeDlLODFtTUI1S0NqNjBuNVB1dVJmUlVfamhEMWFRNzQ1SHo5cHdMUTZjYWJBUUJ1RW1ZcDRHQ2c0Nkgza05IdXd5UlhXOEF5cFBSZUdqTDM4dmV5cUhqOEtRZ1Fxd1h0Ujk5NHo1TW5CWjlrYl9qcmhZeVZnZTdXdTRHYnJUaHFQVXpQQWh1c3hMZ3lJZjBibnhaSy02bWFZVl9jQ2tsUDMzLXh0enpGWGlUZnZyWjRPYlF1U0dEX1hOQ0VFbmFrNzU2eTFuRy1MNXRGTlRzS09vLUxyY3NxVEdiMjExY0hUdGgxVS03Y0dlaThlY0tQZHRsd0ZQXzl4LVJlNlRJcjJqSEo5SmRGTGNzZDZ6WHF5ZTN4Y2tVdFY3YnRiX21UekYyZkZsdkliaVJoeW9SamNXNVVpX0FIZ010UVJqV1JSN1Q1MXJwRUdNY0FtNUR5alRNcWJPQ0VLQkFPYmZfb1Z0NzM1eHlic3gwRHFzbWdLcjI4dnN3TWxqQVhkbnFSVDRaUnFmaUtfa0JPUGtOWXhTYXR6VWs5UG5GWExSa3o5WElvR1J5aWhNU1hMaWlxako5Q3FiQS0tTWlJTlJJQ2VEOFBBMmxwaG0tekJzeWU0Yk5qSHh3SlF4X1dXbDlDZ1ZuM0FaX2NYamVlbzFlcG5YNXJuQ3RpWGRfYW5BcjJsSFpfekMxejJnZHNMdkk1SFN2bXdTLXJBd1pPdk9kU3ZPREQwYWdxZHRBNEhMckRkNnJBdzhxOU5wV0FYdmJ0T1NmWlVUdlpzRjdLRjEtWXZNd0RQZ1RnMkZiYTlkVFU0b1dweGxpVkFUUkdVUHBjUFFELXY1OFZaSzJ0dkNEWDhQZzh6VG9jWEV1UVJrU3E4T3lXNWQ4SXY0dVJQektVTktXWnVya2NDU29NNE1ZRUhHallTY2h6N1JPd2tXU1E1bHpiVGJ1X1FxT2owb3NWc0ExREcyQlRoX1FrT1hMYXdZN0tMbmFCOFpCd1ZPenVod01OOVhNbVRwT0VpWGxaRGxFMmI4WFhLY3BDSjlUZlRPX1dKNlJPWGVvS1h3dWtHblNjd1RTUkZZVE1tQXpWakNuV3YxRkpVMkVXcHUybWVhb2RTdkdwZ0lFaWVqem1SSlR3YW5oLXpVUnROQnFEVktuR2Zqcmttb1doZnBCWlpKeUFUVi1BSVQ0MkhyOVZNX3Mzc2p3Z3BMUGJyeFg0cC01UlE5T2h2VTZGa2YwUDBfNjhmcW9BSU9GREczUkNwd1NwaTctTk0wTFROQTFMRHFPSFg3UzRNRTRibkVwaUhKM3A1UUNzQVVXVGtjZzdlYmZWMEpmbm1rbWs4OGpwQ0xSeGlMU0VGQjRabl9rYnB3bFRpYzcya1pzeHVQVFhhQXpydElhTXJnc1BmZXNMcmFhSS1Ja01GTFZPeVpKWWtxSUxIWjhtUm00OUFFUnpRR3hnSUx1c2oyNFg3blNPTHR1am1JdnJOcTdRQzlZTENYVDZDM2pvRThNVGJYNEh1dk1DSENSLVJrSUdiQUtfeWNSYXo1M1ZQRjZY)
        xcode: latest
        cocoapods: default
      triggering:
        events:
          - push
          - tag
          - pull_request
        branch_patterns:
          - pattern: 'master'
            include: true
            source: true
      scripts:
        - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
          script: |
            keychain initialize
        - name: 
          script: |
            app-store-connect fetch-signing-files $BUNDLE_ID --type IOS_APP_STORE --create
        - name: Use system default keychain
          script: |
            keychain add-certificates
        - name: Set up code signing settings on Xcode project
          script: |
            xcode-project use-profiles
        - name: Increment build number
          script: |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR
            agvtool new-version -all $(($BUILD_NUMBER + 1))
        - name: Build ipa for distribution
          script: |
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
      artifacts:
        - build/ios/ipa/*.ipa
        - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
      publishing:
        app_store_connect:                 
          apple_id: suhajda.kevin.ferenc@gmail.com   
          password: Encrypted(Z0FBQUFBQmZsYUM3YnBEUWdEbDFVSURmb0VydVlkZkthNkEwdFMxQ0JLTjhEeWM3VFNnREh5czRFOERNZ04yVHFKdGwxcDZSY2w4NzBQcUlNenEyZ3MzTDRvMV9GUVRDVlhaZjl4S1RJQWZaNUZJZVhKTkZma2M9)
        email:
            recipients:
            - kevin@nevercode.io
